{% extends "base/base.html" %}

{% block head %}
<title>
    {% if topic %}
        {{ topic.title }}
    {% else %}
        Грешка
    {% endif %}
</title>
{% endblock %}

{% block body %}
<main class="content-wrapper">

    {% if error_code == "topic_not_found" %}
        <div class="error-message">
            <h2>Грешка</h2>
            <p>Темата не съществува или нямате достъп.</p>
            <a href="/categories"><button>⬅ Обратно към категориите</button></a>
        </div>

    {% else %}
        <article class="topic-post">
            <header>
                <h2>{{ topic.title }}</h2>
                <p><strong>Автор ID:</strong> {{ topic.author_id }}</p>
                <p>Категория ID: {{ topic.category_id }}</p>
                <p class="meta">Тема ID: {{ topic.id }}</p>
            </header>
        </article>

        <section class="replies">
            <h3>Отговори</h3>
            {% for reply in replies %}
            <div class="reply">
                <p><strong>Потребител ID: {{ reply.creator_id }}</strong></p>
                <p>{{ reply.text }}</p>
                <div class="meta">Публикувано на: {{ reply.created_at }}</div>
            </div>
            {% else %}
            <p>Няма отговори все още.</p>
            {% endfor %}
        </section>

        <section class="reply-form">
            <h3>Добави отговор</h3>
            <form method="post" action="/topics/{{ topic.id }}/reply">
                <label for="content">Съобщение:</label>
                <textarea id="content" name="content" rows="4" required></textarea>
                <button type="submit">Изпрати</button>
            </form>
        </section>
    {% endif %}

</main>
{% endblock %}
